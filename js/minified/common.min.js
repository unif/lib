function openPage(a){var b=$.extend({url:null,dialogTitle:null,iframeHeight:400,iframeWidth:800,hide:"slide",show:"slide",closeR:"Y",isDialog:"N"},a);if("N"==b.isDialog)return redirect(b.url),void 0;var c='<div class="ifPage"><iframe id="iframe_page" frameborder="0" scrolling="no"></iframe></div>';$(document.body).append(c),gD=$("div.ifPage"),gF=$("#iframe_page"),gF.attr({src:b.url,width:b.iframeWidth,height:b.iframeHeight}).bind("load",function(){gF.contents().find("#apex-dev-toolbar,#htmldbDevToolbar").remove()}),gD.dialog({autoOpen:!1,height:"auto",modal:!0,resizable:!0,title:b.dialogTitle,width:"auto",hide:b.hide,close:function(){$(this).dialog("destroy"),gD.remove(),"undefined"!=typeof gReport?gReport.search("SEARCH"):"Y"==b.closeR&&redirect("f?p="+$v("pFlowId")+":"+$v("pFlowStepId")+":"+$v("pInstance"))}}),gD.dialog("open")}function getLov(a,b,c){switch(b){case"F":getData("branch_no:branch_name","pub112t0",a,c);break;case"R":getData("regi_id:regi_nm","v_region_code",a,c);break;case"E":getData("entitycode:entityname","blm_entity",a,c);break;case"S":getData("sku_no:sku_nm","sku",a,c);break;case"P":getData("goods_id:goods_nm","blm008t0",a,c);break;case"SU":getData("sub_code:ch_name","sub_code",a,c)}}function tabularEmpty(){return"0000"==pad(apex.widget.tabular.gNumRows+apex.widget.tabular.gNewRows,4)}function tabularInitRow(a,b,c){var d=[];$("input[name="+b+"]").each(function(){var b=$(this).val();b&&d.push(b)});for(var e=1;a>=e;e++){var f=c+pad(e,2);if(-1==$.inArray(f,d)){addRow();var g=pad(apex.widget.tabular.gNumRows+apex.widget.tabular.gNewRows,4);$("#"+b+"_"+g).val(f)}}}function tabularCopyRow(a,b){for(var c=b.split(","),d=0;d<c.length;d++){var e=c[d]+"_0001",f=$v(e);if(f)for(var g=2;a>=g;g++){var h=c[d]+"_"+pad(g,4),i=$v(h);i?i!=f&&$("#"+h).val(f).trigger("change"):$("#"+h).val(f).trigger("change")}}}function arrowKey(a){$(a).keydown(function(){var a=a?a:window.event?window.event:"",b=a.keyCode?a.keyCode:a.which;if(37==b||38==b||39==b||40==b){var c=document.activeElement.parentNode,d=$x_UpTill(c,"TR"),e=$x_UpTill(d,"TABLE"),f=e.rows,g=d.cells,h=c.cellIndex,i=d.rowIndex,j="";switch(b){case 37:if(0>h-1)return!1;0!=f[i].cells[h-1].childNodes.length&&(j=f[i].cells[h-1].childNodes);break;case 38:if(0>i-1)return!1;0!=f[i-1].cells[h].childNodes.length&&(j=f[i-1].cells[h].childNodes);break;case 39:if(h+1>=g.length)return!1;0!=f[i].cells[h+1].childNodes.length&&(j=f[i].cells[h+1].childNodes);break;case 40:if(i+1>=f.length)return!1;0!=f[i+1].cells[h].childNodes.length&&(j=f[i+1].cells[h].childNodes)}if(""!=j)for(var k=0;k<j.length;k++)"text"==j[k].type&&j[k].focus()}})}function refreshRep(a,b,c){var d=new htmldb_Get(null,$v("pFlowId"),"APPLICATION_PROCESS=dummy",0);"N"==c?d.add(a.id,a.value):(d.add(a.id,""),$x_Value(a.id,""));var e=d.get();e||$("#"+b+" div.borderless-region").trigger("apexrefresh")}function searchRep(a,b){$($x_UpTill(a,"TR")).find("input:text").each(function(){refreshRep(this,b,"N")})}function refreshIR(a,b){var ul=$("ul.tabbed-navigation-list"),li=$("li",ul);li.removeClass("active");var items=eval(a);$.htmldbSetSession(items,{success:function(){gReport.search("SEARCH")}}),li.filter(function(){return $(this).text()==b}).addClass("active")}function fnIrRefresh(a){var b=new htmldb_Get(null,$v("pFlowId"),"APPLICATION_PROCESS=DUMMY",0);b.add(a.id,$v(a.id));var c=b.get();gReport.search("SEARCH"),c=null}function addRows(a){for(var b=0;a>b;b++)addRow()}function enterAddRow(a,b,c,d){if($f_Enter(a)){var e=$x_UpTill(b,"TR"),f=$x_UpTill(b,"TABLE");s=$(f).find("td[headers='CHECK$01']").text().match(/\u5408\u8ba1/)?1:0,e.rowIndex==parseInt(gNumRows+gNewRows+s)?addRow():null,setTimeout(function(){$("#f"+pad(c,2)+"_"+pad(gNumRows+gNewRows,4)).focus(),"function"==typeof d&&d()},200)}}function Get_Info_From_Server(a,b,c,d){var e=d.split(":"),f=c.parentNode.parentNode,g=new apex.ajax.ondemand("GET_DATA_FROM_DB",function(){var a=p.readyState;if(1==a||2==a||3==a);else{if(4!=a)return!1;for(var b=p.responseText.split(":"),c=0;c<b.length;c++)isNaN(e[0])?"INPUT"==$x(e[c]).nodeName?$x(e[c]).value=b[c]:$x(e[c]).innerHTML=b[c]:"undefined"!=typeof f.cells[e[c]].getElementsByTagName("INPUT")[0]?f.cells[e[c]].getElementsByTagName("INPUT")[0].value=b[c]:f.cells[e[c]].innerHTML=b[c]}});g.ajax.addParam("x01",a),g.ajax.addParam("x02",b),g.ajax.addParam("x03",c.value),g.ajax.addParam("x04",e.length),g._get()}function backToTop(){document.getElementById("toTop").style.display=document.documentElement.scrollTop+document.body.scrollTop>300?"block":"none"}!function(){$.tabDefaults=$.tabDefaults||{},$.tabDefaults={tabCounter:2,tabTl:"<li><a href='#{href}'>#{label}</a> <span class='ui-icon ui-icon-close'>\u5220\u9664\u6807\u7b7e</span></li>",tabClose:"span.ui-icon-close"},$.fn.usTabs=function(a){function c(){b.tabs("add","#tabs-"+a.tabCounter,"Tab "+a.tabCounter),a.tabCounter++}a=$.extend({},$.tabDefaults,a||{});var b=this.tabs({tabTemplate:a.tabTl,add:function(c,d){$(d.panel).show(),$(d.tab).parent().find(a.tabClose).click(function(){b.tabs("remove",$("li",b).index($(this).parents("li:first")[0]))}),b.tabs("select","#"+d.panel.id)}}),d={addTab:c};return d}}(jQuery),function(a){a.fn.htmldbScroll=function(b){var c={divHeight:"200px",sbarClass:""};b=a.extend(c,b),this.each(function(){var c=a(this),d=a("div.vs_bottom",c),e=a("div.vs_bottom table:first",c),f=a("tr:first",e),g=e.height(),h=a("div.vs_top table thead",c);return g<=parseInt(b.divHeight.replace("px",""))?!1:(f.children().each(function(){var c=a(this),d=c.css("padding-left"),e=c.css("padding-right"),f=c.outerWidth()-parseInt(d.replace("px",""))-parseInt(e.replace("px",""));c.width(f)}),h.append(f),d.width(parseInt(e.width())+20),a("tr:first",h).append(a("<th/>",{"class":b.sbarClass})),d.css({height:b.divHeight}).scrollTop(0),void 0)})}}(jQuery),function(a){a.fn.checkBill=function(b){b=a.extend({checkType:null,checkMsg:"\u8bf7\u9009\u62e9\u8981\u5ba1\u6838\u7684\u5355\u636e",uncheckMsg:"\u8bf7\u9009\u62e9\u8981\u53cd\u5ba1\u6838\u7684\u5355\u636e",checkSuccess:"\u5ba1\u6838\u6210\u529f",uncheckSuccess:"\u53cd\u5ba1\u6838\u6210\u529f"},b);var c="CHECK"==b.checkType?b.checkMsg:b.uncheckMsg,d="CHECK"==b.checkType?b.checkSuccess:b.uncheckSuccess,e=new htmldb_Get(null,$v("pFlowId"),"APPLICATION_PROCESS=CheckBill",$v("pFlowStepId"));if(e.addParam("x01",b.checkType),!this.length)return a.htmldbDialog.warn(c,"\u63d0\u793a\u4fe1\u606f",null),!1;this.each(function(){var d=a(this),f=d.attr("check:status"),g=d.attr("check:billno");"CHECK"==b.checkType?"0"==f?e.addParam("f01",g):null:"1"==f?e.addParam("f01",g):null});var f=e.get();"SUCCESS"==f?(a.htmldbDialog.success(d,"\u63d0\u793a\u4fe1\u606f",null),gReport.search("SEARCH")):a.htmldbDialog.error(f,"\u63d0\u793a\u4fe1\u606f",null)}}(jQuery),function(){$.widget("ui.iframe_page",{options:{url:null,dialogTitle:null,iframeHeight:400,iframeWidth:800,hide:"slide",show:"slide"},_createPrivateStorage:function(){var a=this;a._elements={$dialog:{},$iframe:{}}},_initElements:function(){var a=this;a._elements.$dialog=$("div.ifPage"),a._elements.$iframe=$("iframe#iframe_page")},_create:function(){var a=this;a._createPrivateStorage()},_init:function(){var a=this;a.createPage(),a.openPage()},createPage:function(){var a=this,b='<div class="ifPage">\n<iframe id="iframe_page" name="iframe_page" frameborder="0" scrolling="auto"></iframe></div>\n';$(document.body).append(b),a._initElements(),a._elements.$iframe.attr({src:a.options.url,width:a.options.iframeWidth,height:a.options.iframeHeight}).bind("load",{self:a},a._handleIframeLoad),a._elements.$dialog.dialog({autoOpen:!1,height:"auto",modal:!0,resizable:!0,title:a.options.dialogTitle,width:"auto",hide:a.options.hide,close:function(){$(this).dialog("destroy"),a._elements.$dialog.remove(),"undefined"!=typeof gReport&&gReport.search("SEARCH")}})},_handleIframeLoad:function(a){var b=a.data.self;b._elements.$iframe.contents().find("#apex-dev-toolbar,#htmldbDevToolbar").remove()},openPage:function(){var a=this;a._elements.$dialog.dialog("open")}})}(jQuery),function(a){a.htmldbAjax=function(b){b=a.extend(!0,{url:"wwv_flow.show",dataType:"html",traditional:!0,cache:!1,type:"POST",data:{p_flow_id:$v("pFlowId"),p_flow_step_id:$v("pFlowStepId"),p_instance:$v("pInstance"),p_request:"APPLICATION_PROCESS=DUMMY"}},b),a.ajax(b)},a.fn.htmldbSetSession=function(b){var c=[],d=[];return this.each(function(){this.id&&(c.push(this.id),$v(this)?d.push($v(this)):d.push(""))}),b=a.extend(!0,{dataType:"text",data:{p_arg_names:c,p_arg_values:d}},b),a.htmldbAjax(b),this},a.htmldbSetSession=function(b,c){var d=[],e=[];a.each(b,function(a,b){d.push(a),e.push(b)}),c=a.extend(!0,{dataType:"text",data:{p_arg_names:d,p_arg_values:e}},c),a.htmldbAjax(c)}}(jQuery),function(a){a.gRefresh=a.gRefresh||{},a.gRefresh.Defaults={load:"l-load-c",mask:"ui-widget-overlay",items:null,selector:null,repRegion:null,paraType:0,hwAjust:30},a.gRefresh.region=function(b){b=a.extend(a.gRefresh.Defaults,b),gr=a(b.selector),a.gRefresh.mask(gr,b),0==b.paraType?a(b.items).htmldbSetSession({success:function(c){c?alert(c):a.gRefresh.removemask(gr,b)}}):a.htmldbSetSession(b.items,{success:function(c){c?alert(c):a.gRefresh.removemask(gr,b)}})},a.gRefresh.mask=function(a,b){l=a.offset().left,t=a.offset().top,h=a.height(),w=a.width(),a.after("<div class='"+b.mask+"' style='position:fixed;top:"+t+"px;left:"+l+"px;width:"+w+"px;height:"+h+"px'></div>"),a.after("<div class='"+b.load+"' style='position:fixed;top:"+(t+b.hwAjust/2)+"px;left:"+(l+w/2-b.hwAjust)+"px'></div>")},a.gRefresh.removemask=function(b,c){b.find(c.repRegion).trigger("apexrefresh").unbind("apexafterrefresh").bind("apexafterrefresh",function(){a("."+c.mask+", ."+c.load).remove()})}}(jQuery);var getData=Get_Info_From_Server,addDetailRow=addRow;$(function(){window.onscroll=backToTop});