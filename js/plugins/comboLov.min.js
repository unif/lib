function comboLov(a,b){function m(a){if(a)b.newRows="1:"+b.maxRowsPerPage,h.hide();else{var d=(b.currentPage-1)*b.maxRowsPerPage+1,e=b.currentPage*b.maxRowsPerPage;b.newRows=d+":"+e}var g=$.extend({p_arg_names:[],p_arg_values:[],x02:b.newRows,x04:i.val()},c);$(b.dependingOnSelector).add(b.pageItemsToSubmit).each(function(a){g.p_arg_names[a]=this.id,g.p_arg_values[a]=$v(this)}),$.ajax({type:"post",url:"wwv_flow.show",data:g,success:function(a){f.html(a),o(),s(),F(),b.isInit=!0}})}function n(){var c=!1,d=$("#"+a+"_report");oRows=$("tbody tr",d),oRows.each(function(a){var d=$(this),e=d.find("td:eq("+parseInt(b.retColIdx-1)+")").text();e==l.val()&&(G(d),c=!0,nIndex=a)}),c||(nIndex=-1)}function o(){n(),oRows.die("click").live("click",function(){vExtraVal=[];for(var c=$(this),d=c.attr("data-ret"),e=c.attr("data-dis"),f=b.extraColIdx.split(","),g=0;g<f.length;g++)vExtraVal.push(c.find("td:eq("+parseInt(f[g]-1)+")").text());r(e,d),f.length>0&&p()})}function p(a){for(var c=b.extraItems.split(","),d=0;d<c.length;d++)$x_Value(c[d],"RESET"==a?"":vExtraVal[d])}function q(c,d){k.val(d);var e=$("#"+a+"_name");"ID_AND_NAME"===b.displayMode?(e.text(c),l.val(d)):l.val(c)}function r(a,b){q(a,b),v(),bValidVal=!0,l.focus();var c=l.data("events").change.length;b&&l.attr("onchange")&&c++,c>=2&&l.trigger("change")}function s(){"N"==$("#"+a+"_next").val()?g.hide():g.show(),"N"==$("#"+a+"_prev").val()?h.hide():h.show()}function t(){b.currentPage+=1,m()}function u(){b.currentPage-=1,m()}function v(){b.isOpen&&(e.hide(),b.isOpen=!1)}function w(){b.isOpen||(e.show(),i.focus(),b.isOpen=!0)}function x(){e.trigger("apexrefresh")}function y(){e.trigger("apexbeforerefresh"),e.append('<span class="apex-loading-indicator"></span>'),m(!0),z()}function z(){e.trigger("apexafterrefresh"),$(".apex-loading-indicator",e).remove()}function A(){if(console.log("change"),bValidVal)return bValidVal=!1,void 0;var a=l.val();if(""==a&&b.nullValue)return r(b.nullText,b.nullValue),void 0;var d=$.extend({x01:"TYPE",x04:a},c);$.ajax({type:"post",url:"wwv_flow.show",dataType:"json",async:!0,data:d,success:function(b){var c=b.info;if(1==c._status){q(c.name,c.id);for(var d in b.extraItems)$x_Value(d,b.extraItems[d])}else q("",""),p("RESET"),2==c._status&&(i.val(a),sPrevSearchValue=a),0==c._status&&(i.val(""),sPrevSearchValue=""),m(!0),w(),i.focus()}})}function B(){var a=oRows.eq(nIndex),c=a.find("td:eq("+parseInt(b.retColIdx-1)+")").text(),d=a.find("td:eq("+parseInt(b.disColIdx-1)+")").text();a.size()&&r(d,c)}function C(a){switch(a.keyCode){case oKeys.esc:return v(),a.preventDefault(),void 0;case oKeys.enter:return B(),a.preventDefault(),void 0;case oKeys.up:return E(),void 0;case oKeys.down:return D(),void 0}}function D(){var a=oRows.size();if(a){nIndex++,nIndex>a-1&&(nIndex=0);var b=oRows.eq(nIndex);b.size()&&G(b)}}function E(){var a=oRows.size();if(a){nIndex--,0>nIndex&&(nIndex=a-1);var b=oRows.eq(nIndex);b.size()&&G(b)}}function F(){e.unbind("keydown").bind({keydown:function(a){C(a)}})}function G(a){a.addClass("over").siblings().removeClass("over")}function H(a){var b=a.target,c=$(b).closest(e),d=$(b).hasClass("icon_close"),a=$(b).closest(j);a.length||c.length||v(),d&&v()}function I(){b.isInit||$(document).mousedown(H),b.dependingOnSelector&&$(b.dependingOnSelector).change(x),setTimeout(function(){i.keydown(function(a){$f_Enter(a)&&i.val()!=sPrevSearchValue&&(sPrevSearchValue=i.val(),m(!0),a.stopPropagation())}),e.bind("apexrefresh",y),g.unbind("click").bind("click",function(a){t(),a.stopPropagation()}),h.unbind("click").bind("click",function(a){u(),a.stopPropagation()}),e.css("min-width",l.outerWidth()+j.outerWidth())},500),oDisLabel.width(nDisWidth),l.change(function(){A()}),j.unbind("click").bind("click",function(a){!b.isInit&&m(!0),b.isInit&&n(),w(),a.stopPropagation()})}var b=$.extend({isOpen:!1,isInit:!1,dependingOnSelector:null,optimizeRefresh:!0,pageItemsToSubmit:null,ajaxIdentifier:null,nullValue:null,nullText:null,retColIdx:1,disColIdx:2,currentPage:1,maxRowsPerPage:15,displayMode:"NAME"},b),c={p_request:"NATIVE="+b.ajaxIdentifier,p_flow_id:$v("pFlowId"),p_flow_step_id:$v("pFlowStepId"),p_instance:$v("pInstance")},d=$("#"+a+"_fieldset"),e=$("#"+a+"_wrap"),f=$(".cont",e),g=$("a.next",e),h=$("a.prev",e),i=$("#"+a+"_search"),j=$("td.open",d),k=$("#"+a+"_HIDDENVALUE"),l=$("#"+a);oDisLabel=$("#"+a+"_name"),oLov=$("td.lov",d),nDisHeight=oLov.outerHeight(),nDisWidth=oLov.outerWidth(),nIndex=0,sPrevSearchValue="",bValidVal=!1,vExtraVal=[],oRows={},oKeys={up:38,down:40,enter:13,tab:9,esc:27},I()}