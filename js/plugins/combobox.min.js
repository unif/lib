(function(a){a.fn.combobox=function(b){b=a.extend({mainDiv:"ui-widget-content",cbbClass:"l-combobox",dialogId:null,retIdx:0,trSelctor:" div.bl-body table.default1 tr:gt(0)"},b);var c=a("#"+b.dialogId),d=a("#"+b.dialogId+b.trSelctor),e=this;_showCbb=function(f){var g=f.data.self,h={left:e.offset().left,top:e.offset().top+e.height()+6,display:"block"};c.css(h).addClass(" "+b.mainDiv+" "+b.cbbClass),d.live("mouseenter",function(){a(this).addClass("over")}).live("mouseleave",function(){a(this).removeClass("over")}).die("click").live("click",{self:e},_handleTrClick),a(document).bind({mousedown:function(a){_doMouseDown(a)}}),e.bind("keydown",function(a){_doKeyDown(a)})},_handleTrClick=function(c){var d=c.data.self,e=a(c.currentTarget).find("td:eq("+b.retIdx+")").text();d.val(e).trigger('change'),_hideCbb()},_hideCbb=function(){c.removeClass(" "+b.mainDiv+" "+b.cbbClass).css("display","none"),a(document).unbind("mousedown",_doMouseDown),e.unbind("keydown",_doKeyDown)},_doKeyDown=function(a){switch(a.keyCode){case 9:_hideCbb();break;case 27:_hideCbb()}},_doMouseDown=function(c){var d=c.target,f=a(d).closest("."+b.cbbClass);typeof f[0]!="undefined"?f[0].id!=b.dialogId&&_hideCbb():d.id!=e[0].id&&_hideCbb()},e.unbind("focus").bind("focus",{self:e},_showCbb)}})(jQuery)